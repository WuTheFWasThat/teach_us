<html>
   <link rel="stylesheet" type="text/css" href="index.css" />
  <body style='text-align: left;'>
    <h1 class="title center">
      TEACH US
    </h1>

    <p>
    First, the solver should notice several things:
    <ul>
      <li>
      The puzzle refers to the card game Tichu.
      There are several hints at this.
      The pictures of the special cards and the suits, the title of "Teach us", or the game logs themselves.
      </li>
      <li>
      The images in the poem correspond to clue images within the rounds.
      The exception is round 1, which then can be presumed to correspond with the first line of the poem.
      </li>
    </ul>

    Next, we can infer a bit about the game logs' format:
    <ul>
      <li>
      Each "word" within a line corresponds to a play, and each line corresponds to a trick.
      </li>
      <li>
      Dots mean pass.  Dashes mean forced pass.
      </li>
      <li>
      Within a play, lower value cards are listed first, except for full houses, in which case the triple is always first.
      </li>
      <li>
      Choices besides the choice of what card to play are indicated in parentheses.
      This includes the mahjong wish, phoenix wild card usage, the dragon pass.
      </li>
      <li>
      The final line indicates scoring, with the two un-bolded columns indicating the round scores (the bolded columns being totals).
      </li>
    </ul>
    <p>

    </p>

    <h2>
      Round 1
    </h2>
    <table>
      <tr><td colspan="999">
        <div style='width: 100%;'>
        <p>
        The text is given away by the first line of the poem, so
        this round is to help teach you the basic mechanic.
        Each hand/number pair encodes a letter; the main puzzle is to discover the encoding scheme.
        </p>

        <p>
        First, notice that the number is always in the range 1-14.
        Since a Tichu hand consists of 14 cards, this suggests that the numbers correspond to indices within a hand.
        Indexing gives a card, and we can associate (non-special) cards with the numbers 1-13.
        The image hand direction will give another bit, together making for 26 possibilities.
        </p>

        <p>
        Given the information presented, the most natural indexing scheme is order of play.
        However, it's not clear in which of the four hands we should index.
        </p>

        <p>
        Knowing the clued phrase, some experimentation yields:
        <ul>
          <li>
          When the hand image points up, we should index into the hand of the first player who went out.
          </li>
          <li>
          When the hand image points down, we should index into the hand of their partner (third to go out).
          </li>
        </ul>
        </p>

        </div>
      </td></tr>
      <tr><td><table>
      <tr>
        <th>T</th>
        <th>E</th>
        <th>A</th>
        <th>C</th>
        <th>H</th>
        <th> </th>
        <th>U</th>
        <th>S</th>
      </tr>
      <tr class="clue">
        <td class="hand2">5</td>
        <td class="hand1">10</td>
        <td class="hand1">1</td>
        <td class="hand1">4</td>
        <td class="hand1">13</td>
        <td style="width: auto">&nbsp;&nbsp;</td>
        <td class="hand2">6</td>
        <td class="hand2">4</td>
      </tr>
      </table></td></tr>
      <tr><td><table>
      <tr class="clue">
        <td class="hand2">7</td>
        <td class="hand1">1</td>
        <td style="width: auto">&nbsp;&nbsp;</td>
        <td class="hand2">14</td>
        <td class="hand2">7</td>
        <td class="hand2">4</td>
        <td class="hand2">3</td>
      </tr>
      <tr>
        <th>I</th>
        <th>N</th>
        <th> </th>
        <th>L</th>
        <th>I</th>
        <th>F</th>
        <th>E</th>
      </tr>
      </table></td></tr>
    </table>

    <h2>
      Round 2
    </h2>
    <table>
      <tr>
        <td class="clue marker">
          <img src="images/mahjong.png" class="icon"/>
        </td>
        <td><table class="clue"><tr>
          <td class="hand1">12</td>
          <td class="hand2">14</td>
          <td class="hand1">3</td>
          <td class="hand1">11</td>
          <td class="hand2">3</td>
        </tr></table></td>
      </tr>
      <tr>
        <td class="clue marker">
          <img src="images/sword.png" class="icon"/>
        </td>
        <td><table class="clue"><tr>
          <td class="hand2">6</td>
          <td class="hand1">2</td>
          <td class="hand1">7</td>
          <td class="hand1">3</td>
          <td class="hand1">3</td>
          <td class="hand1">1</td>
          <td class="hand1">6</td>
        </tr></table></td>
      </tr>
      <tr><td class="log" colspan="999">
        <div>
        <p>
        1(3)P(2)3456789TJQKA . . .<br/>
        - 3 5 8 - . J A - . . <br/>
        4 - 8 Q . - K A . - .<br/>
        44 . - 55 99 QQ - . .<br/>
        77733 - TTTJJ 2222 . - .<br/>
        d -<br/>
        - 666 . . - <br/>
        D . . -<br/>
        - 8<br/>
        </p>
        100+T <b>300</b>
        0 <b>0</b>
        </div>
      </td></tr>
    </table>

    <h2>
      Round 3
    </h2>
    <table>
      <tr>
        <td class="clue marker">
          <img src="images/star.png" class="icon"/>
        </td>
        <td><table class="clue"><tr>
          <td class="hand2">2</td>
          <td class="hand1">6</td>
          <td class="hand2">10</td>
          <td class="hand1">10</td>
        </tr></table></td>
      </tr>
      <tr>
        <td class="clue marker">
          <img src="images/dog.png" class="icon"/>
        </td>
        <td><table class="clue"><tr>
          <td class="hand1">11</td>
          <td class="hand2">2</td>
          <td class="hand2">3</td>
          <td class="hand1">8</td>
          <td style="width: auto">-</td>
          <td class="hand2">9</td>
          <td class="hand1">1</td>
          <td class="hand1">4</td>
          <td class="hand1">4</td>
          <td class="hand1">9</td>
          <td class="hand1">8</td>
        </tr></table></td>
      </tr>
      <tr><td class="log" colspan="999">
        <div>


        <p>
        1(A) A . . .<br/>
        <span class="missing">?</span><span class="missing">?</span><span class="missing">?</span><span class="missing">?</span> 5566 . . <span class="missing">?</span><span class="missing">?</span><span class="missing">?</span><span class="missing">?</span> . . .<br/>
        <span class="missing">?</span> 7 . 8 Q A . . .<br/>
        <span class="missing">?</span><span class="missing">?</span> . . JJ QQ . . .<br/>
        JP(J) . . .<br/>
        D(L) . . .<br/>
        d -<br/>
        444 . - .<br/>
        6789T . - <span class="missing">?</span><span class="missing">?</span><span class="missing">?</span><span class="missing">?</span><span class="missing">?</span> . . -<br/>
        <span class="missing">?</span><span class="missing">?</span><span class="missing">?</span><span class="missing">?</span><span class="missing">?</span><span class="missing">?</span><span class="missing">?</span> . . -<br/>
        KK AA . - .<br/>
        2 K - . .<br/>
        - - 3<br/>
        <br/>
        </p>
        100 <b>400</b>
        0 <b>0</b>
        </div>
      </td></tr>
    </table>
        <div style='width: 100%;'>
- First, we can see by counting known scores that the winning team must be players 2 and 4.  By counting the number of points the opponents score, we see that they must score exactly 5 additional points.  The only possibility for this is for the unknown card in trick 3 to be a 5.  Their remaining tricks must not earn them points
- Therefore, the first tractor in trick 2 cannot contain a pair of fives, and so must contain a pair of threes.
- Let's rule out a bomb in trick 2.  The only possibility is a bomb of 4s.  In this case, the tractor in that trick is with 2s.  But now there are a single 2 and 3 unplayable, since there is no 4 to make the straight.  Only 1 card gets left unplayed so this is impossible.
- Since the third play in trick 2 must be a tractor, we see by process of elimination it must be 99TT
- Now, the play of 6 cards, by process of elimination, cannot be a pair of triples or triple of pairs.  The only possible straight is 234567.
- The triple in trick 8 now must be of 4s.
- What remains is straightforward
</div>

    <h2>
      Round 4
    </h2>
    <table>
      <tr>
        <td class="clue marker">
          <img src="images/dragon.png" class="icon"/>
        </td>
        <td><table class="clue"><tr>
          <td class="hand1">1</td>
          <td class="hand2">10</td>
          <td class="hand2">8</td>
          <td class="hand1">6</td>
          <td class="hand1">14</td>
          <td class="hand2">14</td>
          <td class="hand1">5</td>
        </tr></table></td>
      </tr>
      <tr>
        <td class="clue marker">
          <img src="images/phoenix.png" class="icon"/>
        </td>
        <td><table class="clue"><tr>
          <td class="hand2">13</td>
          <td class="hand1">11</td>
          <td class="hand1">8</td>
          <td class="hand1">7</td>
        </tr></table></td>
      </tr>
      <tr><td class="log" colspan="999">
        <div>
        <p>
        222333 . . .<br/>
        77799 <span class="missing">?</span><span class="missing">?</span><span class="missing">?</span><span class="missing">?</span><span class="missing">?</span> . . .<br/>
        <span class="missing">?</span> <span class="missing">?</span> 5 A . . - - QQQQ . . .<br/>
        TTT JJJ . . .<br/>
        445566 . . .<br/>
        6 9 . <span class="missing">?</span> - KKKK . - .<br/>
        <span class="missing">?</span><span class="missing">?</span><span class="missing">?</span><span class="missing">?</span><span class="missing">?</span><span class="missing">?</span><span class="missing">?</span> . - .<br/>
        <span class="missing">?</span><br/>
        </p>
        200 <b>600</b>
        0 <b>0</b>
        </div>
      </td></tr>
    </table>

        <div style='width: 100%;'>
- First, notice of the 5 unplayed cards, four of them are the 4 special cards.  Dog is recognizable by the trick pattern, and the rest are recognizable by the choice in parentheses.  We will assume no special cards, throughout
- Now, notice that in the second trick, both hands must be full houses, since no straight (bomb) can end in a 4.
- In trick 5, the only possibilities are 444555, 445566, and 456789.  444555 is impossible since we've observed two 4s already.  456789 is impossible since a fourth 4 and 9 prevents the straight of 7 from being possible.  Thus it is 445566.
- Since all 4s are used, the straight must be 5-J.
- By process of elimination, the card in trick 6 is an A
- Now, by process of elimination, the full houses are 7s over 9s, and 8s over 4s.
- So of the 2 remaining aces, at least one is played.  In fact, only there is only 1 valid spot.  Thus the last 5th unplayed card is also an ace.
- The last 3 cards are straightforward
</div>


    <h2>
      Round 5
    </h2>
    <table>
      <tr>
        <td class="clue marker">
          <img src="images/jade.png" class="icon"/>
        </td>
        <td><table class="clue"><tr>
          <td class="hand1">7</td>
          <td class="hand2">5</td>
          <td class="hand1">13</td>
          <td class="hand2">9</td>
          <td class="hand1">3</td>
          <td style="width: auto">&nbsp;&nbsp;</td>
          <td class="hand2">13</td>
          <td class="hand2">2</td>
          <td class="hand2">14</td>
          <td class="hand2">6</td>
        </tr></table></td>
      </tr>
      <tr>
        <td class="clue marker">
          <img src="images/pagoda.png" class="icon"/>
        </td>
        <td><table class="clue"><tr>
          <td class="hand1">10</td>
          <td class="hand2">8</td>
          <td class="hand1">8</td>
          <td class="hand1">6</td>
          <td class="hand1">13</td>
          <td class="hand1">1</td>
          <td class="hand1">1</td>
          <td class="hand1">5</td>
          <td class="hand1">4</td>
        </tr></table></td>
      </tr>
      <tr><td class="log" colspan="999">
        <div>
        <p>
        1(2) 2 Q A . . .<br/>
        567P(8)9T . . .<br/>
        23456 . . 23456 . . .<br/>
        d -<br/>
        44 99 . . QQ . . .<br/>
        7788 . . .<br/>
        KK JJJJ . . .<br/>
        33 . . .<br/>
        TT . . .<br/>
        2 K A D(L) . . .<br/>
        A . . .<br/>
        5 Q A . - .<br/>
        6789T<br/>
        </p>
        200+G <b>1000</b>
        0 <b>0</b>
        </div>
      </td></tr>
    </table>
        <div style='width: 100%;'>

- First, notice that player 2 plays a ten in trick 9.  Thus they must play a ten in trick 1.
- Now, the last trick can have no more tens, and thus is a straight, 6789T.
- Trick 2 also can't have more tens, and thus is a straight, 567P(8)9T
- Trick 7 contains a bomb, either jacks or aces.  Suppose it were aces.  Then trick 9 has JQK, trick 1 has JK, and so trick 11 is impossible.  Thus it is jacks.
- Trick 9 is thus Q K A, and so trick 1 has K A, and so trick 11 an A
- The remaining cards are 223344556677888.  There can be at most two full houses from those cards, and so the second play in trick 3 must be a straight.  Thus it contains 456.  This means all 6s are used, so the first play cannot be a full house either.  Thus it is a straight, 23456.
- So trick 6 must be 7788
- Lastly, the trick 3 straight must be 23456, a straight flush bomb!
</div>

    <h2>
      Putting it together
    </h2>

    With all this, we have the final solution:
    <table class="poem">
      <tr>
        <td></td>
        <td>Teach us,</td>
        <td></td>
        <td>in life,</td>
      </tr>
      <tr>
        <td class="firstcol">to be</td>
        <td >
          <span style='border-bottom: 1px solid gray;'>
          lucky
          </span>
        </td>
        <td>and</td>
        <td>
          <span style='border-bottom: 1px solid gray;'>
          skilled</span>,
        </td>
      </tr>
      <tr>
        <td class="firstcol">to be</td>
        <td>
          <span style='border-bottom: 1px solid gray;'>
          wise
          </span>
        </td>
        <td>and</td>
        <td>
          <span style='border-bottom: 1px solid gray;'>
          good-willed</span>,
        </td>
      </tr>
      <tr>
        <td class="firstcol">as</td>
        <td>
          <span style='border-bottom: 1px solid gray;'>
          husband
          </span>
        </td>
        <td>and</td>
        <td>
          <span style='border-bottom: 1px solid gray;'>
          wife</span>,
        </td>
        <!--td>____,</td-->
      </tr>
      <tr>
        <td class="firstcol">to have</td>
        <td>
          <span style='border-bottom: 1px solid gray;'>
          grand vows
          </span>
        </td>
        <td></td>
        <td>
          <span style='border-bottom: 1px solid gray;'>
          fulfilled</span>.
        </td>
      </tr>
    </table>

  </body>

</html>
